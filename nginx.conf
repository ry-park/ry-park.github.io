server {
    listen 80; # Слушаем на порту 80 внутри контейнера

    # Корневая директория с файлами сайта
    root /usr/share/nginx/html;
    index index.html;

    # Настройки для обслуживания статических файлов
    location / {
        # Пытаться обслужить файл, если не найдено - отдать index.html
        # Это критически важно для SPA (например, на React/Vue), но полезно и для обычных сайтов
        try_files $uri $uri/ /index.html;
    }

    # Запрещаем доступ к файлам, начинающимся с точки (например, .env, .git)
    location ~ /\. {
        deny all;
        return 404;
    }

    # Настройки кэширования для статических assets (CSS, JS, изображения)
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff2|ttf)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
